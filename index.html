<!DOCTYPE html>
<html>
<head>
  <title>MindMapr â€“ Automatic Concept Mapper</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
</head>
<body>
  <h2>ðŸ§  MindMapr â€“ Automatic Concept Mapper</h2>
  <textarea id="text-input" rows="5" cols="80">Artificial intelligence helps doctors make better decisions in less time.</textarea><br>
  <button onclick="generateGraph()">Generate</button>

  <div id="cy" style="width: 100%; height: 400px; margin-top: 20px;"></div>

  <script>
    function generateGraph() {
  const text = document.getElementById("text-input").value;
  axios.post('http://localhost:5000/mindmap', { text: text })
    .then(response => {
      console.log("API Response:", response.data);  // See JSON response in console

      const { nodes, edges } = response.data;

      if (!nodes || !edges) {
        console.error("Missing nodes or edges in response:", response.data);
        return;
      }

      cytoscape({
        container: document.getElementById('cy'),
        elements: [
          ...nodes.map(node => ({ data: { id: node.id, label: node.id } })),
          ...edges.map(edge => ({
            data: {
              source: edge.source,
              target: edge.target,
              label: edge.label
            }
          }))
        ],
        style: [
          {
            selector: 'node',
            style: {
              'label': 'data(label)',
              'background-color': '#61bffc',
              'text-valign': 'center',
              'color': '#000',
              'font-size': '12px'
            }
          },
          {
            selector: 'edge',
            style: {
              'label': 'data(label)',
              'curve-style': 'bezier',
              'target-arrow-shape': 'triangle',
              'width': 2,
              'line-color': '#ccc',
              'target-arrow-color': '#ccc',
              'font-size': '10px'
            }
          }
        ],
        layout: { name: 'cose' }
      });
    })
    .catch(error => {
      console.error(" API Error:", error);
    });
}

  </script>
</body>
</html>
